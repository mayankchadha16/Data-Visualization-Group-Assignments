<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parallel Coordinates Plot</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  </head>
  <body>
    <div id="parallel-coordinates-plot"></div>

    <script>
      Plotly.d3.csv("make.csv", function (err, rows) {
        var types = [...new Set(rows.map((row) => row["Type"]))];

        var trace = {
          type: "parcoords",
          line: {
            color: rows.map((row) => types.indexOf(row["Type"])),
            colorscale: "Viridis",
            opacity: 0.7,
            colorbar: {
              title: 'Type',
              tickvals: [0, 1],
              ticktext: ['BEV', 'PHEV'],
            },
          },
          dimensions: [
            {
              label: "Model Year",
              values: rows.map((row) => row["Model Year"]),
            },
            {
              label: "Electric Range",
              values: rows.map((row) => row["Electric Range"]),
            },
            {
              label: "Base MSRP",
              values: rows.map((row) => row["Base MSRP"]),
            },
          ],
        };

        var layout = {
          title: {
            text: "Parallel Coordinates Plot",
            font: {
              size: 20,
            },
            x: 0.5, 
          },
          height: 800,
          width: 1500,
          legend: {
            traceorder: "reversed",
          },
          xaxis: {
            tickangle: -45,
            showgrid: true, 
          },
          yaxis: {
            showgrid: true, 
          },
          plot_bgcolor: "#f8f8f8", 
          paper_bgcolor: "#f8f8f8", 
        };

        Plotly.newPlot("parallel-coordinates-plot", [trace], layout);
      });
    </script>
  </body>
</html>
